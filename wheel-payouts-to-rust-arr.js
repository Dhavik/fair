// Taken from https://stake.com/provably-fair/game-events

// TODO: use this script for plinko payouts as well:
// [{"operationName":"plinkoPayouts","variables":{},"query":"query plinkoPayouts {\n  info {\n    plinkoPayouts {\n      payouts\n      rows\n      risk\n      __typename\n    }\n    __typename\n  }\n}\n"}]

// on stake, this is queries with graphql
const PAYOUTS = {
  "10": {
    low: [1.5, 1.2, 1.2, 1.2, 0, 1.2, 1.2, 1.2, 1.2, 0],
    medium: [0, 1.9, 0, 1.5, 0, 2, 0, 1.5, 0, 3],
    high: [0, 0, 0, 0, 0, 0, 0, 0, 0, 9.9],
  },
  "20": {
    low: [
      1.5,
      1.2,
      1.2,
      1.2,
      0,
      1.2,
      1.2,
      1.2,
      1.2,
      0,
      1.5,
      1.2,
      1.2,
      1.2,
      0,
      1.2,
      1.2,
      1.2,
      1.2,
      0,
    ],
    medium: [1.5, 0, 2, 0, 2, 0, 2, 0, 1.5, 0, 3, 0, 1.8, 0, 2, 0, 2, 0, 2, 0],
    high: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 19.8],
  },
  "30": {
    low: [
      1.5,
      1.2,
      1.2,
      1.2,
      0,
      1.2,
      1.2,
      1.2,
      1.2,
      0,
      1.5,
      1.2,
      1.2,
      1.2,
      0,
      1.2,
      1.2,
      1.2,
      1.2,
      0,
      1.5,
      1.2,
      1.2,
      1.2,
      0,
      1.2,
      1.2,
      1.2,
      1.2,
      0,
    ],
    medium: [
      1.5,
      0,
      1.5,
      0,
      2,
      0,
      1.5,
      0,
      2,
      0,
      2,
      0,
      1.5,
      0,
      3,
      0,
      1.5,
      0,
      2,
      0,
      2,
      0,
      1.7,
      0,
      4,
      0,
      1.5,
      0,
      2,
      0,
    ],
    high: [
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      29.7,
    ],
  },
  "40": {
    low: [
      1.5,
      1.2,
      1.2,
      1.2,
      0,
      1.2,
      1.2,
      1.2,
      1.2,
      0,
      1.5,
      1.2,
      1.2,
      1.2,
      0,
      1.2,
      1.2,
      1.2,
      1.2,
      0,
      1.5,
      1.2,
      1.2,
      1.2,
      0,
      1.2,
      1.2,
      1.2,
      1.2,
      0,
      1.5,
      1.2,
      1.2,
      1.2,
      0,
      1.2,
      1.2,
      1.2,
      1.2,
      0,
    ],
    medium: [
      2,
      0,
      3,
      0,
      2,
      0,
      1.5,
      0,
      3,
      0,
      1.5,
      0,
      1.5,
      0,
      2,
      0,
      1.5,
      0,
      3,
      0,
      1.5,
      0,
      2,
      0,
      2,
      0,
      1.6,
      0,
      2,
      0,
      1.5,
      0,
      3,
      0,
      1.5,
      0,
      2,
      0,
      1.5,
      0,
    ],
    high: [
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      39.6,
    ],
  },
  "50": {
    low: [
      1.5,
      1.2,
      1.2,
      1.2,
      0,
      1.2,
      1.2,
      1.2,
      1.2,
      0,
      1.5,
      1.2,
      1.2,
      1.2,
      0,
      1.2,
      1.2,
      1.2,
      1.2,
      0,
      1.5,
      1.2,
      1.2,
      1.2,
      0,
      1.2,
      1.2,
      1.2,
      1.2,
      0,
      1.5,
      1.2,
      1.2,
      1.2,
      0,
      1.2,
      1.2,
      1.2,
      1.2,
      0,
      1.5,
      1.2,
      1.2,
      1.2,
      0,
      1.2,
      1.2,
      1.2,
      1.2,
      0,
    ],
    medium: [
      2,
      0,
      1.5,
      0,
      2,
      0,
      1.5,
      0,
      3,
      0,
      1.5,
      0,
      1.5,
      0,
      2,
      0,
      1.5,
      0,
      3,
      0,
      1.5,
      0,
      2,
      0,
      1.5,
      0,
      2,
      0,
      2,
      0,
      1.5,
      0,
      3,
      0,
      1.5,
      0,
      2,
      0,
      1.5,
      0,
      1.5,
      0,
      5,
      0,
      1.5,
      0,
      2,
      0,
      1.5,
      0,
    ],
    high: [
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      49.5,
    ],
  },
};

const convertArr = (arr) => {
  return `[${arr.map((ele) => convert(ele)).join(", ")}]`;
};

const convertNumber = (n) => {
  if (Number.isInteger(n)) return `${n}.`;
  return `${n}`;
};

const convert = (x) => {
  if (Array.isArray(x)) {
    return convertArr(x);
  }
  if (typeof x === "number") {
    return convertNumber(x);
  }
  return `${x}`;
};

const lines = [];
const l = (x) => lines.push(x);

/*
static PAYOUT_8: [[f64; 5]; 3] = [
    // low risk
    [5.6, 2.1, 1.1, 1., 0.5],
    // medium risk
    [13., 3., 1.3, 0.7, 0.4],
    // high risk
    [29., 4., 1.5, 0.3, 0.2],
];
*/
[10, 20, 30, 40, 50].forEach((n) => {
  const len = PAYOUTS[n]["low"].length;
  const risks = ["low", "medium", "high"];
  l(`pub static PAYOUT_${n}: [[f64; ${len}]; ${risks.length}] = [`);
  l(
    risks
      .map((risk) => {
        return `  ${convert(PAYOUTS[n][risk])}`;
      })
      .join(",\n")
  );
  l(`];`);
});
console.log(
  `// generated by wheel-payouts-to-rust-arr.js, do not manually edit!`
);
console.log(`// use make command to regenerate`);
console.log(lines.join("\n"));
